
## 协程与非阻塞io编程

利用协程的yield和resume，可以在非阻塞io操作可能会因为io事件不能完成时，利用yield操作，交给其他协程运行。同时，利用epoll来检查io事件的到来情况，若有io事件到来，此时进行io操作不会阻塞，据此resume对应协程，完成对应的io事件。


利用协程进行编程可以保证编程的方式是同步，顺序向下的方式，不用把整个处理流程裁剪成多个回调函数构成的事件，大大提高了编程的效率，降低维护成本，减小出错的机会。缺点是每一个协程有自己的context需要存储，加大了内存的消耗。


协程的切换可以利用系统提供的ucontext，或者自行利用汇编切换用户堆栈和相关寄存器。

